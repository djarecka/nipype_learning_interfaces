machine:
  services:
    - docker

dependencies:
  cache_directories:
    - "~/nipype_data"
  override:
    - pip install --upgrade pip
    - pip install docker numpy pytest
    - pip install https://github.com/kaczmarj/neurodocker/archive/master.tar.gz

test:
  override:
    - neurodocker -b centos:7 -p yum --ants version=2.1.0 --miniconda python_version=3.5.1 conda_install=traits,pandas pip_install=nipype --no-check-urls --no-print-df -o Dockerfile_test
    - docker build -f Dockerfile_test -t myimage_test .
    - docker run myimage_test 
    - pytest tests_unit/test_temp.py